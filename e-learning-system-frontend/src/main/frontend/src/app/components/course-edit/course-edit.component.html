<div class="wrapper">
  <div class="content">

    <h1>{{course.title}}</h1>
    <p>{{course.description}}</p>

    <div class="resources">
        <ul *ngFor="let file of course.topics">
          <li>{{file.title}}</li>
          <button class="delete" title="delete resource"
                  (click)="deleteTopic(file)">x
          </button>
          <ul>
            <li *ngFor="let res of file.courseResources">
                <a href="{{res.url}}"> {{res.title}}</a>
              <button class="delete" title="delete resource"
                      (click)="deleteResource(res)">x
              </button>
            </li>
            <button type="button" (click)="info(file.id)" class="btn btn-primary" data-toggle="modal"
                    data-target="#downloadModal">
              attach files
            </button>

          </ul>
        </ul>
      <br>
      <div *ngIf="course.test!=null">
        <p>{{course.test}}</p>
        <button type="button" class="btn btn-primary">Edit test</button>
      </div>
      <a (click)="onClickOpenForm()" class="btn-link" style="cursor: pointer">Add topic</a>
      <div [hidden]="!openForm" >
        <input type="text"
              placeholder="Topic title"
               class="form-control"
               [formControl]="topicTitle"
              />
        <button type="submit" class="btn-primary" (click)="saveTopic()">
          Save
        </button>
        <button class="btn-secondary" (click)="openForm=false">Cancel</button>
      </div>
      <div *ngIf="!course.test">
        <a (click)="onClickOpenFormTest()" class="btn-link" style="cursor: pointer">Add final test</a>
      </div>
      <div [hidden]="!openFormTest">
        <input type="text"
               placeholder="Test title"
               class="form-control"
               [formControl]="testTitle"
        />
        <button type="submit" class="btn-primary" (click)="saveTest()">
          Save
        </button>
        <button class="btn-secondary" (click)="openFormTest=false">Cancel</button>
      </div>
    </div>
  </div>

  <app-download-resource [topic]="topicTtl"></app-download-resource>
  </div>

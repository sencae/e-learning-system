<div class="wrapper">
  <div class="content">

    <!--<h1>{{test.testName}}</h1>-->
    <!--<div *ngFor="let question of test.questions">-->
    <!--<h2>{{question.question}}</h2>-->
    <!--<div *ngFor="let answer of question.answers">-->
    <!--<label>-->
    <!--<input type="radio"  [value]="answers">-->
    <!--<span>{{answer.answer}}</span>-->
    <!--</label>-->
    <!--</div>-->
    <!--</div>-->
    <!--<a routerLink="edit">edit</a>-->
    <!--<button class="btn btn-primary" type="submit">Complete</button>-->
    <!--<pre>-->
    <!--{{answers|json}}-->
    <!--</pre>-->

    <form class="container pt-2" [formGroup]="testForm" (ngSubmit)="completeTest()">
      <div formArrayName="questions">
        <div [formGroupName]="i" *ngFor="let question of testForm.get('questions').controls; index as i">
          <div class="form-group">
            <div>
              {{question.value.question}}
            </div>
            <div formArrayName="answers">
              <div [formGroupName]="a" *ngFor="let answer of question.get('answers').controls; index as a">
                <div class="form-group">
                  <label>
                    <input type="radio" formControlName="correctAnswer" [value]="true"
                           (change)="onSelect(question,answer)"
                           title="correctAnswer">
                    <span>{{answer.value.answer}}</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="submit-form">
        <button [disabled]="loading"
                type="submit"
                class="btn btn-primary">
          Complete
        </button>
        <img *ngIf="loading" src="../../../assets/img/loading.gif">
        <button class="btn btn-secondary" routerLink="../">Cancel</button>
      </div>
    </form>
    <a routerLink="edit">edit</a>
    <pre>
  {{ testForm.value | json }}
</pre>
  </div>
</div>
